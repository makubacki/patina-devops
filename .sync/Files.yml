# Specifies the files synced from Patina DevOps to other Patina repositories.
#
# This file is meant to ensure common configuration across Patina repos that is centralized in Patina DevOps.
#
# Files are contributed directly in Patina DevOps by the original author and then automatically synced after the PR
# in Patina DevOps is merged by a bot to all of the repos specified in this file.
#
# To maintain consistency across Patina, always consider if a configuration/settings file is appropriate as
# a common file in Patina DevOps or should be repo-specific.
#
# Copyright (c) Microsoft Corporation.
# SPDX-License-Identifier: Apache-2.0
#
# For more information, see:
# https://github.com/BetaHuhn/repo-file-sync-action

# Maintenance: Keep categories in ascending alphabetical order - easier to scan, identify duplicates, etc.

group:

# Rust Configuration - Cargo Deny
  - files:
    - source: .sync/rust/deny.toml
      dest: deny.toml
      template:
        denied_crates:
          - '{ crate = "tiny-keccak", reason = "Not updated in 5 years. Use alternative."}'
        ignored_rust_security_advisories:
          # Note: `paste` is currently used in `gdbstub` brought in by `patina_debugger`
          - '{ id = "RUSTSEC-2024-0436", reason = "Macros for token pasting. No longer maintained per readme. Consider alternatives." }'
        license_exceptions:
          - '{ allow = ["0BSD"], crate = "managed" }'
          - '{ allow = ["BSD-3-Clause"], crate = "alloc-no-stdlib"}'
          - '{ allow = ["Unicode-3.0"], crate = "unicode-ident" }'
        skipped_crates:
          - '{ crate = "bitflags", reason = "Need https://github.com/gz/rust-x86/pull/150 to be merged into rust-x86."}'
    repos: |
      makubacki/patina

  - files:
    - source: .sync/rust/deny.toml
      dest: deny.toml
      template:
        denied_crates:
          - '{ crate = "tiny-keccak", reason = "Not updated in 5 years. Use alternative."}'
        ignored_rust_security_advisories:
        license_exceptions:
          - '{ allow = ["Unicode-3.0"], crate = "unicode-ident" }'
          - '{ allow = ["MPL-2.0"], crate = "colored" }'
          - '{ allow = ["MPL-2.0"], crate = "ucs2" }'
        skipped_crates:
          - '{ crate = "bitflags", reason = "Need https://github.com/gz/rust-x86/pull/150 to be merged into rust-x86."}'
          - '{ crate = "windows-sys", reason = "https://crates.io/crates/colored latest (v3.0.0) uses 0.59. https://crates.io/crates/anstyle-query latest (v1.1.5) uses 0.61."}'
    repos: |
      makubacki/patina-readiness-tool
